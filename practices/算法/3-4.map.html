<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // leetcode 76  最小覆盖长度
    var minWindow = function (s, t) {
        // 新建两个移动指针
        var l = 0;
        var r = 0;
        // 新建一个字典
        var need = new Map();
        // 循环遍历 t 
        for (let c of t) {
            need.set(c, need.has(c) ? need.get(c) + 1 : 1)
        }
        // console.log(need)    //Map(3) {"A" => 1, "B" => 1, "C" => 1}

        // 字典长度 赋给t 中的需求类型 
        let needType = need.size;
        // 初始化结果
        let res = "";
        while (r < s.length) {
            // 找到 t中匹配的每个字符后 减一 找剩下的
            // 遍历右 指针
            const c = s[r];
            if (need.has(c)) {
                need.set(c, need.get(c) - 1);
                if (need.get(c) === 0) {
                    needType -= 1
                }
            }
            // 当 t中的都找到了 需要缩小范围
            while (needType === 0) {
                // console.log(s.substring(l, r + 1))
                const newRes = s.substring(l, r + 1);
                if (!res || newRes.length < res.length) {
                    res = newRes
                }
                const c2 = s[l];
                if (need.has[c2]) {
                    need.set(c2, need.get(c2) + 1)
                    if (need.get(c2) === 1) {
                        needType += 1
                    }
                }
                l += 1;
            }
            r = r + 1;
        }

        return res
    }

    var test = minWindow("ABCDJJDKD", "ABC")
    console.log(test)
</script>

</html>